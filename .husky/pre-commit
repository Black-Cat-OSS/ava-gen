# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ –∏–∑ —Ñ–∞–π–ª–∞
COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE" 2>/dev/null || echo "")

echo "üìù –°–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞: $COMMIT_MSG"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å "WIP:" –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è WIP_COMMIT
if echo "$COMMIT_MSG" | grep -q "^WIP:" || [ "$WIP_COMMIT" = "true" ]; then
  echo "‚è≠Ô∏è  WIP –∫–æ–º–º–∏—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω - —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ –ª–∏–Ω—Ç–µ—Ä–æ–≤ –∏ —Ç–µ—Å—Ç–æ–≤)..."
  echo "üé® –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤..."
  npx prettier --write "**/*.{ts,js,tsx,jsx,json,md,yml,yaml}" --ignore-path .gitignore
  echo "‚úÖ WIP –∫–æ–º–º–∏—Ç –≥–æ—Ç–æ–≤!"
else
  echo "‚úÖ –û–±—ã—á–Ω—ã–π –∫–æ–º–º–∏—Ç - –∑–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏..."
  echo "üîç –ó–∞–ø—É—Å–∫ lint-staged (–ª–∏–Ω—Ç–µ—Ä—ã + —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)..."
  npx lint-staged
  
  # echo "üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤..."
  # npm run test --if-present
  echo "‚úÖ –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
fi
